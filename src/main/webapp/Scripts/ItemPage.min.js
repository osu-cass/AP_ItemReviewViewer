function initializeItemPage(a){var b=new ItemPage.Controller(a,document.getElementById("item-container"));b.render()}var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},ItemPage;!function(a){function b(a){for(var b="",c=0,d=a;c<d.length;c++)for(var e=d[c],f=0,g=e.accessibilityResources;f<g.length;f++){var h=g[f];h.currentSelectionCode&&!h.disabled&&(b+=h.currentSelectionCode+";")}return encodeURIComponent(b)}function c(a){var b=Object.assign({},a);return b.currentSelectionCode=a.defaultSelection,b}function d(a){for(var b={},c=0,d=a;c<d.length;c++)for(var e=d[c],f=0,g=e.accessibilityResources;f<g.length;f++){var h=g[f];b[h.resourceCode]=h.currentSelectionCode}var i=JSON.stringify(b),j=btoa(i);return j}function e(a){for(var b=[],c=0,d=a;c<d.length;c++){var e=d[c];b.indexOf(e.label)===-1&&b.push(e.label)}return b}a.getResourceTypes=e;var f=function(a){function c(b){var c=a.call(this,b)||this;return c.saveOptions=function(a){c.props.onSave(a)},c}return __extends(c,a),c.prototype.openAboutItemModal=function(a){if(13===a.keyCode||23===a.keyCode){var b=$("#about-item-modal-container");b.modal()}},c.prototype.openMoreLikeThisModal=function(a){if(13===a.keyCode||23===a.keyCode){var b=$("#more-like-this-modal-container");b.modal()}},c.prototype.openShareModal=function(a){if(13===a.keyCode||23===a.keyCode){var b=$("#share-modal-container");b.modal()}},c.prototype.openAccessibilityModal=function(a){if(13===a.keyCode||23===a.keyCode){var b=$("#accessibility-modal-container");b.modal()}},c.prototype.render=function(){var a=this,c=b(this.props.accResourceGroups),d=this.props.itemViewerServiceUrl.concat("&isaap=",c),e=600,f=window.innerWidth<350?"":"Accessibility",g=window.innerWidth<e?"About":"About This Item",h=window.innerWidth<e?"More":"More Like This";return React.createElement("div",null,React.createElement("div",{className:"btn-toolbar item-nav-group",role:"toolbar","aria-label":"Toolbar with button groups"},React.createElement("div",{className:"btn-group mr-2 item-nav-bottom",role:"group","aria-label":"First group"},React.createElement("a",{className:"btn item-nav-btn","data-toggle":"modal","data-target":"#about-item-modal-container",onKeyUp:function(b){return a.openAboutItemModal(b)},tabIndex:0},React.createElement("span",{className:"glyphicon glyphicon-info-sign glyphicon-pad","aria-hidden":"true"}),g),React.createElement("a",{className:"btn item-nav-btn","data-toggle":"modal","data-target":"#more-like-this-modal-container",onKeyUp:function(b){return a.openMoreLikeThisModal(b)},tabIndex:0},React.createElement("span",{className:"glyphicon glyphicon-th-large glyphicon-pad","aria-hidden":"true"}),h),React.createElement("a",{className:"btn item-nav-btn","data-toggle":"modal","data-target":"#share-modal-container",onKeyUp:function(b){return a.openShareModal(b)},tabIndex:0},React.createElement("span",{className:"glyphicon glyphicon-share-alt glyphicon-pad","aria-hidden":"true"}),"Share")),React.createElement("div",{className:"btn-group mr-2 pull-right",role:"group","aria-label":"Second group"},React.createElement("a",{type:"button",className:"accessibility-btn btn btn-primary","data-toggle":"modal","data-target":"#accessibility-modal-container",onKeyUp:function(b){return a.openAccessibilityModal(b)},tabIndex:0},React.createElement("span",{className:"glyphicon glyphicon-collapse-down","aria-hidden":"true"}),f))),React.createElement(ItemFrame,{url:d}),React.createElement(AboutThisItem.ATIComponent,__assign({},this.props.aboutThisItemVM)),React.createElement(AccessibilityModal.ItemAccessibilityModal,{accResourceGroups:this.props.accResourceGroups,onSave:this.props.onSave,onReset:this.props.onReset}),React.createElement(MoreLikeThis.Modal,__assign({},this.props.moreLikeThisVM)),React.createElement(Share.ShareModal,{iSAAP:c}))},c}(React.Component);a.Page=f;var g=function(){function a(a,b){var e=this;this.itemProps=a,this.rootDiv=b,this.onSave=function(a){for(var b=[],c=0,f=e.itemProps.accResourceGroups;c<f.length;c++){for(var g=f[c],h=Object.assign({},g),i=[],j=0,k=h.accessibilityResources;j<k.length;j++){var l=k[j],m=Object.assign({},l);m.currentSelectionCode=a[m.label]||m.currentSelectionCode,i.push(m)}h.accessibilityResources=i,b.push(h)}e.itemProps=Object.assign({},e.itemProps),e.itemProps.accResourceGroups=b;var n=d(e.itemProps.accResourceGroups);document.cookie=e.itemProps.accessibilityCookieName.concat("=",n,"; path=/"),e.render()},this.onReset=function(){document.cookie=e.itemProps.accessibilityCookieName.concat("=","","; path=/");var a=e.itemProps.accResourceGroups.map(function(a){var b=Object.assign({},a);return b.accessibilityResources=b.accessibilityResources.map(c),b});e.itemProps=Object.assign({},e.itemProps),e.itemProps.accResourceGroups=a,e.render()}}return a.prototype.render=function(){ReactDOM.render(React.createElement(f,__assign({},this.itemProps,{onSave:this.onSave,onReset:this.onReset})),this.rootDiv)},a}();a.Controller=g}(ItemPage||(ItemPage={}));